---
import BaseLayout from "../layouts/BaseLayout.astro";
import FauxDesktop from "../components/FauxDesktop.svelte";
import type { Profile } from "../data/profileSchema";
import { getEntry } from "astro:content";

const profileEntry = await getEntry('profile', 'default');
const fallbackProfile: Profile = profileEntry.data;

const year = new Date().getFullYear();
const lastTuned = new Date().toISOString().slice(0, 10);
const canonicalUrl = Astro.url?.href ?? Astro.site?.href ?? 'https://biolink.example.com/';
---

<BaseLayout title="Analog Signals" description="CRT-inspired biolink hub for creative broadcasts.">
  <FauxDesktop
    client:load
    {year}
    {lastTuned}
    fallbackProfile={fallbackProfile}
    siteUrl={canonicalUrl}
  />
</BaseLayout>
